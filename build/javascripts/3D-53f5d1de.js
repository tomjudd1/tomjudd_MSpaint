function init(){container=document.createElement("div"),document.body.appendChild(container),camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,15e3),camera.position.z=500,scene=new THREE.Scene,hemiLight=new THREE.HemisphereLight(16777215,16777215,.1),hemiLight.color.setHSL(1,1,1),hemiLight.groundColor.setHSL(.095,1,.75),hemiLight.position.set(0,500,0),scene.add(hemiLight);var e=new THREE.DirectionalLight(16777215,.8);e.position.set(1,1,1.5),e.castShadow=!0,e.shadowDarkness=.1,scene.add(e);var o=new THREE.DirectionalLight(16772929,.5);o.position.set(1,1,0),o.castShadow=!0,o.shadowDarkness=.1,scene.add(o),mouthMaterial=new THREE.MeshLambertMaterial({color:16414425,shading:THREE.SmoothShading,overdraw:1}),eyeMaterial=new THREE.MeshLambertMaterial({color:16514795,shading:THREE.SmoothShading,overdraw:1}),skinMaterial=new THREE.MeshLambertMaterial({color:5750520,shading:THREE.SmoothShading,overdraw:1}),wallMaterial=new THREE.MeshPhongMaterial({color:11200512,specular:16777215,shininess:0,shading:THREE.FlatShading}),hairMaterial=new THREE.MeshLambertMaterial({color:1970464,shading:THREE.SmoothShading,overdraw:1});var r=new THREE.OBJLoader;r.load("/library/3D/hole.obj",function(e){e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=wallMaterial)}),scene.add(e),e.rotation.y=90*(Math.PI/180),e.rotation.x=-20*(Math.PI/180),e.receiveShadow=!0,e.position.y=3*-headSize,e.position.z=10*-headSize,e.scale.set(10,10,10)}),headSize=30,eyeSize=6.5,pupilSize=eyeSize/4,eyeGap=10;var i=new THREE.SphereGeometry(headSize*scaler,circSegs,circSegs),a=new THREE.SphereGeometry(eyeSize*scaler,circSegs,circSegs),n=new THREE.TorusGeometry(pupilSize*scaler,1.5*pupilSize,circSegs,circSegs),t=(new THREE.SphereGeometry(.1*scaler,circSegs,circSegs),new THREE.SphereGeometry(10*scaler,circSegs,circSegs),new THREE.MeshNormalMaterial,new THREE.MeshBasicMaterial({color:0})),s=new THREE.CylinderGeometry(2.52*headSize,3*headSize,8*headSize,circSegs,circSegs,!1);body=new THREE.Mesh(s,skinMaterial),body.position.x=0,body.position.z=-400,body.position.y=-150,body.receiveShadow=!0,scene.add(body),head=new THREE.Mesh(i,skinMaterial),head.position.x=0,head.position.z=2*headSize,head.position.y=130,head.castShadow=!0,head.receiveShadow=!0,body.add(head),hair=new THREE.Mesh(a,hairMaterial),hair.position.x=0,hair.position.z=zPlane,hair.position.y=-(1.5*headSize)*scaler,hair.castShadow=!0,hair.receiveShadow=!0,lEye=new THREE.Mesh(a,eyeMaterial),lEye.position.z=headSize*scaler,lEye.position.x=eyeGap*scaler,lEye.castShadow=!0,lEye.receiveShadow=!0,head.add(lEye),rEye=new THREE.Mesh(a,eyeMaterial),rEye.position.z=headSize*scaler,rEye.position.x=-eyeGap*scaler,rEye.castShadow=!0,rEye.receiveShadow=!0,head.add(rEye),lPupil=new THREE.Mesh(n,t),lPupil.position.z=eyeSize*scaler,lPupil.position.x=0*scaler,lEye.add(lPupil),rPupil=new THREE.Mesh(n,t),rPupil.position.z=eyeSize*scaler,rPupil.position.x=0*scaler,rEye.add(rPupil);var d=65*scaler,c=5*scaler,h=1*scaler,l=-2*scaler;earCurve=new THREE.ClosedSplineCurve3([new THREE.Vector3(0,0+h,0),new THREE.Vector3(d/4,0+h/1.4+l/4,0),new THREE.Vector3(d/2,0+l,0),new THREE.Vector3(d/2,c/2+l,0),new THREE.Vector3(0,c/2-h/2,0),new THREE.Vector3(-d/2,c/2+l,0),new THREE.Vector3(-d/2,0+l,0),new THREE.Vector3(-d/4,0+h/1.4+l/4,0)]);var w=new THREE.TubeGeometry(earCurve,300,2.5*scaler,5,!0);ears=new THREE.Mesh(w,mouthMaterial),ears.position.z=-(headSize/2)*scaler,ears.position.x=0*scaler,ears.position.y=-5*scaler,head.add(ears);renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(1247767),renderer.shadowMapEnabled=!0,document.body.appendChild(renderer.domElement),renderer.gammaInput=!0,renderer.gammaOutput=!0,goal=hair.position,window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(e){mouseX=e.clientX-windowHalfX,mouseY=e.clientY-windowHalfY;var o=new THREE.Vector3;o.set(e.clientX/window.innerWidth*2-1,2*-(e.clientY/window.innerHeight)+1,.5),o.unproject(camera);var r=o.sub(camera.position).normalize(),i=-(camera.position.z/r.z+zPlane);followPoint=camera.position.clone().add(r.multiplyScalar(i)),distanceFromGoal=followPoint.distanceTo(goal)}function animate(){head.remove(mouth),head.remove(brow),mouthGeometry&&mouthGeometry.dispose(),browGeometry&&browGeometry.dispose();var e=50*scaler,o=9*scaler,r=-3*scaler+distanceFromGoal/20,i=3*scaler+20-distanceFromGoal/6,a=5;curve=new THREE.ClosedSplineCurve3([new THREE.Vector3(0,0+r,0),new THREE.Vector3(e/4,0+r/1.4+i/a,0),new THREE.Vector3(e/2,0+i,0),new THREE.Vector3(e/2,o/2+i,0),new THREE.Vector3(e/4,o/2+i/a,0),new THREE.Vector3(0,o/2,0),new THREE.Vector3(-e/4,o/2+i/a,0),new THREE.Vector3(-e/2,o/2+i,0),new THREE.Vector3(-e/2,0+i,0),new THREE.Vector3(-e/4,0+r/1.4+i/a,0)]),mouthGeometry=new THREE.TubeGeometry(curve,100,2.5*scaler,8,!0),mouth=new THREE.Mesh(mouthGeometry,mouthMaterial),mouth.position.z=headSize*scaler,mouth.position.x=0*scaler,mouth.position.y=-headSize/2*scaler,mouth.castShadow=!0,mouth.receiveShadow=!0,head.add(mouth);var n=headSize*scaler,t=3*scaler+10-distanceFromGoal/8,s=1.3;browCurve=new THREE.SplineCurve3([new THREE.Vector3(-n/2-headSize/5,0,-(headSize/2)),new THREE.Vector3(-n/2,0,0),new THREE.Vector3(-n/4,0+t/s,0),new THREE.Vector3(0,0+t,0),new THREE.Vector3(n/4,0+t/s,0),new THREE.Vector3(n/2,0,0),new THREE.Vector3(n/2+headSize/5,0,-(headSize/2))]),browGeometry=new THREE.TubeGeometry(browCurve,100,2.5*scaler,8,!1),brow=new THREE.Mesh(browGeometry,mouthMaterial),brow.position.z=headSize/1.05*scaler,brow.position.x=0*scaler,brow.position.y=headSize/3*scaler,brow.castShadow=!0,brow.receiveShadow=!0,head.add(brow),requestAnimationFrame(animate),render()}function render(){.001*Date.now();lEye.lookAt(followPoint),rEye.lookAt(followPoint),camera.lookAt(mouth.position),head.rotation.x=mouseY/1e4,head.rotation.z=-(mouseX/1e4),head.rotation.y=mouseX/1e4,body.rotation.x=0,body.rotation.z=-(mouseX/1e4),body.rotation.y=mouseX/1e4,renderer.render(scene,camera)}function resize(){stage.canvas.width=window.innerWidth,stage.canvas.height=window.innerHeight}var container,stats,camera,scene,renderer,composer,geometry,head,mouth,curve,browCurve,body,brow,mouthGeometry,browGeometry,wall,wallGeometry,hole,mouseX=0,mouseY=0,distanceFromGoal=0,followPoint=new THREE.Vector3,zPlane=250,goal=new THREE.Vector3,openingDistance=50,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,scaler=2.5,circSegs=32,mouthMaterial,headSize,eyeSize,pupilSize,eyeGap;document.addEventListener("mousemove",onDocumentMouseMove,!1);