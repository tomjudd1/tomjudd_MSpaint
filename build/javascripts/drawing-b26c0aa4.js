$(function(){function n(){var n=Math.floor(400+400*Math.random()),e=T("sin",{freq:n,mul:.02});T("perc",{r:1e3},e).on("ended",function(){this.pause()}).bang().play()}function e(){o.freeDrawingBrush.color=i(),o.freeDrawingBrush.width=10+10*Math.random()}function r(){o.setHeight(window.innerHeight),o.setWidth(window.innerWidth),o.renderAll()}function i(){var n=Math.floor(Math.random()*t.length),e=t[n];return e}var t=new Array("#6600ff","#ffff66","#0066ff","#ff0066","#00ff66"),o=this.__canvas=new fabric.Canvas("drawing",{isDrawingMode:!0});o.freeDrawingBrush.color=i(),o.freeDrawingBrush.width=10+10*Math.random(),window.addEventListener("resize",r,!1),window.addEventListener("mouseup",e,!1),window.addEventListener("mousedown",n,!1),window.addEventListener("touchend",e,!1),window.addEventListener("touchend",r,!1);var d=!1;$(function(){$(document).keydown(function(e){32==e.keyCode&&(d=!0,o.clear(),n())})}),r()});