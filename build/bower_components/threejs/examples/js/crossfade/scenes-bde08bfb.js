function generateGeometry(e,t){function r(e,t){e.faces.forEach(function(e){for(var r=e instanceof THREE.Face3?3:4,a=0;r>a;a++)e.vertexColors[a]=t})}for(var a=new THREE.Geometry,n=0;t>n;n++){var o=new THREE.Vector3;o.x=1e4*Math.random()-5e3,o.y=6e3*Math.random()-3e3,o.z=8e3*Math.random()-4e3;var i=new THREE.Euler;i.x=2*Math.random()*Math.PI,i.y=2*Math.random()*Math.PI,i.z=2*Math.random()*Math.PI;var s,h=new THREE.Vector3,E=new THREE.Color;h.x=200*Math.random()+100,"cube"==e?(s=new THREE.BoxGeometry(1,1,1),h.y=200*Math.random()+100,h.z=200*Math.random()+100,E.setRGB(0,0,Math.random()+.1)):"sphere"==e&&(s=new THREE.IcosahedronGeometry(1,1),h.y=h.z=h.x,E.setRGB(Math.random()+.1,0,0)),r(s,E);var d=new THREE.Mesh(s);d.position.copy(o),d.rotation.copy(i),d.scale.copy(h),d.updateMatrix(),a.merge(d.geometry,d.matrix)}return a}function Scene(e,t,r,a,n,o){this.clearColor=o,this.camera=new THREE.PerspectiveCamera(a,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=r,this.scene=new THREE.Scene,this.scene.add(new THREE.AmbientLight(5592405));var i=new THREE.SpotLight(16777215,1.5);i.position.set(0,500,2e3),this.scene.add(i),this.rotationSpeed=n,defaultMaterial=new THREE.MeshLambertMaterial({color:16777215,shading:THREE.FlatShading,vertexColors:THREE.VertexColors}),this.mesh=new THREE.Mesh(generateGeometry(e,t),defaultMaterial),this.scene.add(this.mesh),renderTargetParameters={minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBFormat,stencilBuffer:!1},this.fbo=new THREE.WebGLRenderTarget(window.innerWidth,window.innerHeight,renderTargetParameters),this.render=function(e,t){this.mesh.rotation.x+=e*this.rotationSpeed.x,this.mesh.rotation.y+=e*this.rotationSpeed.y,this.mesh.rotation.z+=e*this.rotationSpeed.z,renderer.setClearColor(this.clearColor),t?renderer.render(this.scene,this.camera,this.fbo,!0):renderer.render(this.scene,this.camera)}}