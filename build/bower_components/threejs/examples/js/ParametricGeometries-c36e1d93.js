THREE.ParametricGeometries={klein:function(e,t){t*=Math.PI,e*=2*Math.PI,t=2*t;var r,o,a;return t<Math.PI?(r=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(t)*Math.cos(e),a=-8*Math.sin(t)-2*(1-Math.cos(t)/2)*Math.sin(t)*Math.cos(e)):(r=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(e+Math.PI),a=-8*Math.sin(t)),o=-2*(1-Math.cos(t)/2)*Math.sin(e),new THREE.Vector3(r,o,a)},plane:function(e,t){return function(r,o){var a=r*e,s=0,i=o*t;return new THREE.Vector3(a,s,i)}},mobius:function(e,t){e-=.5;var r,o,a,s=2*Math.PI*t,i=2;return r=Math.cos(s)*(i+e*Math.cos(s/2)),o=Math.sin(s)*(i+e*Math.cos(s/2)),a=e*Math.sin(s/2),new THREE.Vector3(r,o,a)},mobius3d:function(e,t){e*=Math.PI,t*=2*Math.PI,e=2*e;var r,o,a,s=e/2,i=2.25,n=.125,c=.65;return r=n*Math.cos(t)*Math.cos(s)-c*Math.sin(t)*Math.sin(s),a=n*Math.cos(t)*Math.sin(s)+c*Math.sin(t)*Math.cos(s),o=(i+r)*Math.sin(e),r=(i+r)*Math.cos(e),new THREE.Vector3(r,o,a)}},THREE.ParametricGeometries.TubeGeometry=function(e,t,r,o,a,s){this.path=e,this.segments=t||64,this.radius=r||1,this.segmentsRadius=o||8,this.closed=a||!1,s&&(this.debug=new THREE.Object3D);var i,n,c,h,E,m,M,u=this,T=this.segments+1,G=new THREE.Vector3,y=new THREE.TubeGeometry.FrenetFrames(e,t,a),H=y.tangents,R=y.normals,P=y.binormals;this.tangents=H,this.normals=R,this.binormals=P;var p=function(t,o){return o*=2*Math.PI,M=t*(T-1),M=Math.floor(M),m=e.getPointAt(t),i=H[M],n=R[M],c=P[M],u.debug&&(u.debug.add(new THREE.ArrowHelper(i,m,r,255)),u.debug.add(new THREE.ArrowHelper(n,m,r,16711680)),u.debug.add(new THREE.ArrowHelper(c,m,r,65280))),h=-u.radius*Math.cos(o),E=u.radius*Math.sin(o),G.copy(m),G.x+=h*n.x+E*c.x,G.y+=h*n.y+E*c.y,G.z+=h*n.z+E*c.z,G.clone()};THREE.ParametricGeometry.call(this,p,t,o)},THREE.ParametricGeometries.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.TubeGeometry.prototype.constructor=THREE.ParametricGeometries.TubeGeometry,THREE.ParametricGeometries.TorusKnotGeometry=function(e,t,r,o,a,s,i){this.radius=e||200,this.tube=t||40,this.segmentsR=r||64,this.segmentsT=o||8,this.p=a||2,this.q=s||3,this.heightScale=i||1;var n=THREE.Curve.create(function(){},function(t){t*=2*Math.PI;var r=.5,o=(1+r*Math.cos(s*t))*Math.cos(a*t),n=(1+r*Math.cos(s*t))*Math.sin(a*t),c=r*Math.sin(s*t);return new THREE.Vector3(o,n*i,c).multiplyScalar(e)}),c=r,h=o,E=new n;THREE.ParametricGeometries.TubeGeometry.call(this,E,c,t,h,!0,!1)},THREE.ParametricGeometries.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.TorusKnotGeometry.prototype.constructor=THREE.ParametricGeometries.TorusKnotGeometry,THREE.ParametricGeometries.SphereGeometry=function(e,t,r){function o(t,r){t*=Math.PI,r*=2*Math.PI;var o=e*Math.sin(t)*Math.cos(r),a=e*Math.sin(t)*Math.sin(r),s=e*Math.cos(t);return new THREE.Vector3(o,a,s)}THREE.ParametricGeometry.call(this,o,t,r,!1)},THREE.ParametricGeometries.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.SphereGeometry.prototype.constructor=THREE.ParametricGeometries.SphereGeometry,THREE.ParametricGeometries.PlaneGeometry=function(e,t,r,o){function a(r,o){var a=r*e,s=0,i=o*t;return new THREE.Vector3(a,s,i)}THREE.ParametricGeometry.call(this,a,r,o)},THREE.ParametricGeometries.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometries.PlaneGeometry.prototype.constructor=THREE.ParametricGeometries.PlaneGeometry;