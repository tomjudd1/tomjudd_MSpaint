THREE.AsciiEffect=function(e,a,t){/*
	* jsAscii 0.1
	* Copyright (c) 2008 Jacob Seidelin, jseidelin@nihilogic.dk, http://blog.nihilogic.dk/
	* MIT License [http://www.nihilogic.dk/licenses/mit-license.txt]
	*/
function r(){b=Math.round(c*S),f=Math.round(n*S),E.width=b,E.height=f,v=e.domElement,v.style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=v.style.backgroundColor,m.rows[0].cells[0].style.color=v.style.color),m.cellSpacing=0,m.cellPadding=0;var a=m.style;a.display="inline",a.width=Math.round(b/S*l)+"px",a.height=Math.round(f/S*l)+"px",a.whiteSpace="pre",a.margin="0px",a.padding="0px",a.letterSpacing=H+"px",a.fontFamily=x,a.fontSize=z+"px",a.lineHeight=D+"px",a.textAlign="left",a.textDecoration="none"}function o(e,a){C.clearRect(0,0,b,f),C.drawImage(y,0,0,b,f);for(var t=C.getImageData(0,0,b,f).data,r="",o=0;f>o;o+=2){for(var c=0;b>c;c++){var n,i,l=4*(o*b+c),p=t[l],u=t[l+1],m=t[l+2],v=t[l+3];i=(.3*p+.59*u+.11*m)/255,0==v&&(i=1),n=Math.floor((1-i)*(M.length-1)),g&&(n=M.length-n-1);var k=M[n];(void 0===k||" "==k)&&(k="&nbsp;"),r+=s?"<span style='color:rgb("+p+","+u+","+m+");"+(h?"background-color:rgb("+p+","+u+","+m+");":"")+(d?"opacity:"+v/255+";":"")+"'>"+k+"</span>":k}r+="<br/>"}a.innerHTML="<tr><td>"+r+"</td></tr>"}a=void 0===a?" .:-=+*#%@":a,t||(t={});var c,n,i=t.resolution?t.resolution:.15,l=t.scale?t.scale:1,s=t.color?t.color:!1,d=t.alpha?t.alpha:!1,h=t.block?t.block:!1,g=t.invert?t.invert:!1,p="low",u=document.createElement("div");u.style.cursor="default";var m=document.createElement("table");u.appendChild(m);var b,f,v;this.setSize=function(a,t){c=a,n=t,e.setSize(a,t),r()},this.render=function(a,t){e.render(a,t),o(e,m)},this.domElement=u;var k=" .,:;i1tfLCG08@".split(""),w=" CGO08@".split(""),x="courier new, monospace",y=e.domElement,E=document.createElement("canvas");if(E.getContext){var C=E.getContext("2d");if(C.getImageData){var M=s?w:k;a&&(M=a);var S=.5;switch(p){case"low":S=.25;break;case"medium":S=.5;break;case"high":S=1}i&&(S=i);var z=2/S*l,D=2/S*l,H=0;if("low"==p)switch(l){case 1:H=-1;break;case 2:case 3:H=-2.1;break;case 4:H=-3.1;break;case 5:H=-4.15}if("medium"==p)switch(l){case 1:H=0;break;case 2:H=-1;break;case 3:H=-1.04;break;case 4:case 5:H=-2.1}if("high"==p)switch(l){case 1:case 2:H=0;break;case 3:case 4:case 5:H=-1}}}};