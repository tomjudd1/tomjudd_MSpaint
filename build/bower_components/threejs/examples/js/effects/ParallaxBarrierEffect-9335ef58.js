THREE.ParallaxBarrierEffect=function(e){var r,a,t,i,n=new THREE.Matrix4,o=new THREE.Matrix4,m=125,p=new THREE.PerspectiveCamera;p.matrixAutoUpdate=!1;var l=new THREE.PerspectiveCamera;l.matrixAutoUpdate=!1;var v=new THREE.Scene,E=new THREE.PerspectiveCamera(53,1,1,1e4);E.position.z=2,v.add(E);var d={minFilter:THREE.LinearFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat},s=new THREE.WebGLRenderTarget(512,512,d),f=new THREE.WebGLRenderTarget(512,512,d),R=new THREE.ShaderMaterial({uniforms:{mapLeft:{type:"t",value:s},mapRight:{type:"t",value:f}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = vec2( uv.x, uv.y );","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","varying vec2 vUv;","void main() {","	vec2 uv = vUv;","	if ( ( mod( gl_FragCoord.y, 2.0 ) ) > 1.00 ) {","		gl_FragColor = texture2D( mapLeft, uv );","	} else {","		gl_FragColor = texture2D( mapRight, uv );","	}","}"].join("\n")}),u=new THREE.Mesh(new THREE.PlaneBufferGeometry(2,2),R);v.add(u),this.setSize=function(r,a){s=new THREE.WebGLRenderTarget(r,a,d),f=new THREE.WebGLRenderTarget(r,a,d),R.uniforms.mapLeft.value=s,R.uniforms.mapRight.value=f,e.setSize(r,a)},this.render=function(d,R){d.updateMatrixWorld(),void 0===R.parent&&R.updateMatrixWorld();var u=r!==R.aspect||a!==R.near||t!==R.far||i!==R.fov;if(u){r=R.aspect,a=R.near,t=R.far,i=R.fov;var c,T,x=R.projectionMatrix.clone(),g=m/30*.5,H=g*a/m,y=a*Math.tan(THREE.Math.degToRad(.5*i));n.elements[12]=g,o.elements[12]=-g,c=-y*r+H,T=y*r+H,x.elements[0]=2*a/(T-c),x.elements[8]=(T+c)/(T-c),p.projectionMatrix.copy(x),c=-y*r-H,T=y*r-H,x.elements[0]=2*a/(T-c),x.elements[8]=(T+c)/(T-c),l.projectionMatrix.copy(x)}p.matrixWorld.copy(R.matrixWorld).multiply(o),p.position.copy(R.position),p.near=R.near,p.far=R.far,e.render(d,p,s,!0),l.matrixWorld.copy(R.matrixWorld).multiply(n),l.position.copy(R.position),l.near=R.near,l.far=R.far,e.render(d,l,f,!0),v.updateMatrixWorld(),e.render(v,E)}};