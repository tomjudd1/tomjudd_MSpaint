THREE.SVGObject=function(e){THREE.Object3D.call(this),this.node=e},THREE.SVGObject.prototype=Object.create(THREE.Object3D.prototype),THREE.SVGObject.prototype.constructor=THREE.SVGObject,THREE.SVGRenderer=function(){function e(e){M.setRGB(0,0,0),C.setRGB(0,0,0),A.setRGB(0,0,0);for(var t=0,i=e.length;i>t;t++){var o=e[t],n=o.color;o instanceof THREE.AmbientLight?(M.r+=n.r,M.g+=n.g,M.b+=n.b):o instanceof THREE.DirectionalLight?(C.r+=n.r,C.g+=n.g,C.b+=n.b):o instanceof THREE.PointLight&&(A.r+=n.r,A.g+=n.g,A.b+=n.b)}}function t(e,t,i,o){for(var n=0,r=e.length;r>n;n++){var s=e[n],c=s.color;if(s instanceof THREE.DirectionalLight){var a=k.setFromMatrixPosition(s.matrixWorld).normalize(),l=i.dot(a);if(0>=l)continue;l*=s.intensity,o.r+=c.r*l,o.g+=c.g*l,o.b+=c.b*l}else if(s instanceof THREE.PointLight){var a=k.setFromMatrixPosition(s.matrixWorld),l=i.dot(k.subVectors(a,t).normalize());if(0>=l)continue;if(l*=0==s.distance?1:1-Math.min(t.distanceTo(a)/s.distance,1),0==l)continue;l*=s.intensity,o.r+=c.r*l,o.g+=c.g*l,o.b+=c.b*l}}}function i(e,t,i){var o=t.scale.x*f,n=t.scale.y*u;m=c(_++),m.setAttribute("x",e.x-.5*o),m.setAttribute("y",e.y-.5*n),m.setAttribute("width",o),m.setAttribute("height",n),i instanceof THREE.SpriteMaterial&&m.setAttribute("style","fill: "+i.color.getStyle()),T.appendChild(m)}function o(e,t,i,o){m=r(I++),m.setAttribute("x1",e.positionScreen.x),m.setAttribute("y1",e.positionScreen.y),m.setAttribute("x2",t.positionScreen.x),m.setAttribute("y2",t.positionScreen.y),o instanceof THREE.LineBasicMaterial&&(m.setAttribute("style","fill: none; stroke: "+o.color.getStyle()+"; stroke-width: "+o.linewidth+"; stroke-opacity: "+o.opacity+"; stroke-linecap: "+o.linecap+"; stroke-linejoin: "+o.linejoin),T.appendChild(m))}function n(e,i,o,n,r){b.info.render.vertices+=3,b.info.render.faces++,m=s(W++),m.setAttribute("d","M "+e.positionScreen.x+" "+e.positionScreen.y+" L "+i.positionScreen.x+" "+i.positionScreen.y+" L "+o.positionScreen.x+","+o.positionScreen.y+"z"),r instanceof THREE.MeshBasicMaterial?(x.copy(r.color),r.vertexColors===THREE.FaceColors&&x.multiply(n.color)):r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial?(v.copy(r.color),r.vertexColors===THREE.FaceColors&&v.multiply(n.color),x.copy(M),G.copy(e.positionWorld).add(i.positionWorld).add(o.positionWorld).divideScalar(3),t(E,G,n.normalModel,x),x.multiply(v).add(r.emissive)):r instanceof THREE.MeshDepthMaterial?(y=1-r.__2near/(r.__farPlusNear-n.z*r.__farMinusNear),x.setRGB(y,y,y)):r instanceof THREE.MeshNormalMaterial&&(L.copy(n.normalModel).applyMatrix3(z),x.setRGB(L.x,L.y,L.z).multiplyScalar(.5).addScalar(.5)),r.wireframe?m.setAttribute("style","fill: none; stroke: "+x.getStyle()+"; stroke-width: "+r.wireframeLinewidth+"; stroke-opacity: "+r.opacity+"; stroke-linecap: "+r.wireframeLinecap+"; stroke-linejoin: "+r.wireframeLinejoin):m.setAttribute("style","fill: "+x.getStyle()+"; fill-opacity: "+r.opacity),T.appendChild(m)}function r(e){return null==O[e]?(O[e]=document.createElementNS("http://www.w3.org/2000/svg","line"),0==D&&O[e].setAttribute("shape-rendering","crispEdges"),O[e]):O[e]}function s(e){return null==N[e]?(N[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==D&&N[e].setAttribute("shape-rendering","crispEdges"),N[e]):N[e]}function c(e){return null==F[e]?(F[e]=document.createElementNS("http://www.w3.org/2000/svg","rect"),0==D&&F[e].setAttribute("shape-rendering","crispEdges"),F[e]):F[e]}console.log("THREE.SVGRenderer",THREE.REVISION);var a,l,E,p,d,f,u,h,R,S,y,m,b=this,g=new THREE.Projector,T=document.createElementNS("http://www.w3.org/2000/svg","svg"),H=new THREE.Box2,w=new THREE.Box2,x=new THREE.Color,v=new THREE.Color,M=new THREE.Color,C=new THREE.Color,A=new THREE.Color,j=new THREE.Color,V=1,k=new THREE.Vector3,G=new THREE.Vector3,L=new THREE.Vector3,z=new THREE.Matrix3,B=new THREE.Matrix4,P=new THREE.Matrix4,N=[],O=[],F=[],W=0,I=0,_=0,D=1;this.domElement=T,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":D=1;break;case"low":D=0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setClearColor=function(e,t){j.set(e),V=void 0!==t?t:1},this.setPixelRatio=function(){},this.setSize=function(e,t){p=e,d=t,f=p/2,u=d/2,T.setAttribute("viewBox",-f+" "+-u+" "+p+" "+d),T.setAttribute("width",p),T.setAttribute("height",d),H.min.set(-f,-u),H.max.set(f,u)},this.clear=function(){for(W=0,I=0,_=0;T.childNodes.length>0;)T.removeChild(T.childNodes[0]);T.style.backgroundColor="rgba("+(255*j.r|0)+","+(255*j.g|0)+","+(255*j.b|0)+","+V+")"},this.render=function(t,r){if(r instanceof THREE.Camera==!1)return void console.error("THREE.SVGRenderer.render: camera is not an instance of THREE.Camera.");this.autoClear===!0&&this.clear(),b.info.render.vertices=0,b.info.render.faces=0,B.copy(r.matrixWorldInverse.getInverse(r.matrixWorld)),P.multiplyMatrices(r.projectionMatrix,B),a=g.projectScene(t,r,this.sortObjects,this.sortElements),l=a.elements,E=a.lights,z.getNormalMatrix(r.matrixWorldInverse),e(E);for(var s=0,c=l.length;c>s;s++){var p=l[s],d=p.material;if(void 0!==d&&0!==d.opacity)if(w.makeEmpty(),p instanceof THREE.RenderableSprite)h=p,h.x*=f,h.y*=-u,i(h,p,d);else if(p instanceof THREE.RenderableLine)h=p.v1,R=p.v2,h.positionScreen.x*=f,h.positionScreen.y*=-u,R.positionScreen.x*=f,R.positionScreen.y*=-u,w.setFromPoints([h.positionScreen,R.positionScreen]),H.isIntersectionBox(w)===!0&&o(h,R,p,d);else if(p instanceof THREE.RenderableFace){if(h=p.v1,R=p.v2,S=p.v3,h.positionScreen.z<-1||h.positionScreen.z>1)continue;if(R.positionScreen.z<-1||R.positionScreen.z>1)continue;if(S.positionScreen.z<-1||S.positionScreen.z>1)continue;h.positionScreen.x*=f,h.positionScreen.y*=-u,R.positionScreen.x*=f,R.positionScreen.y*=-u,S.positionScreen.x*=f,S.positionScreen.y*=-u,w.setFromPoints([h.positionScreen,R.positionScreen,S.positionScreen]),H.isIntersectionBox(w)===!0&&n(h,R,S,p,d)}}t.traverseVisible(function(e){if(e instanceof THREE.SVGObject){k.setFromMatrixPosition(e.matrixWorld),k.applyProjection(P);var t=k.x*f,i=-k.y*u,o=e.node;o.setAttribute("transform","translate("+t+","+i+")"),T.appendChild(o)}})}};