THREE.PVRLoader=function(){this._parser=THREE.PVRLoader.parse},THREE.PVRLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.PVRLoader.prototype.constructor=THREE.PVRLoader,THREE.PVRLoader.parse=function(r,a){var e=13,t=new Uint32Array(r,0,e),o={buffer:r,header:t,loadMipmaps:a};if(55727696===t[0])return THREE.PVRLoader._parseV3(o);if(559044176===t[11])return THREE.PVRLoader._parseV2(o);throw new Error("[THREE.PVRLoader] Unknown PVR format")},THREE.PVRLoader._parseV3=function(r){var a,e,t=r.header,o=t[12],R=t[2],p=t[6],E=t[7],m=(t[9],t[10]),P=t[11];switch(R){case 0:a=2,e=THREE.RGB_PVRTC_2BPPV1_Format;break;case 1:a=2,e=THREE.RGBA_PVRTC_2BPPV1_Format;break;case 2:a=4,e=THREE.RGB_PVRTC_4BPPV1_Format;break;case 3:a=4,e=THREE.RGBA_PVRTC_4BPPV1_Format;break;default:throw new Error("pvrtc - unsupported PVR format "+R)}return r.dataPtr=52+o,r.bpp=a,r.format=e,r.width=E,r.height=p,r.numSurfaces=m,r.numMipmaps=P,r.isCubemap=6===m,THREE.PVRLoader._extract(r)},THREE.PVRLoader._parseV2=function(r){var a,e,t=r.header,o=t[0],R=t[1],p=t[2],E=t[3],m=t[4],a=(t[5],t[6]),P=(t[7],t[8],t[9],t[10]),n=(t[11],t[12]),i=255,V=24,s=25,u=m&i,d=P>0;if(u===s)e=d?THREE.RGBA_PVRTC_4BPPV1_Format:THREE.RGB_PVRTC_4BPPV1_Format,a=4;else{if(u!==V)throw new Error("pvrtc - unknown format "+u);e=d?THREE.RGBA_PVRTC_2BPPV1_Format:THREE.RGB_PVRTC_2BPPV1_Format,a=2}return r.dataPtr=o,r.bpp=a,r.format=e,r.width=p,r.height=R,r.numSurfaces=n,r.numMipmaps=E+1,r.isCubemap=6===n,THREE.PVRLoader._extract(r)},THREE.PVRLoader._extract=function(r){var a={mipmaps:[],width:r.width,height:r.height,format:r.format,mipmapCount:r.numMipmaps,isCubemap:r.isCubemap},e=r.buffer,t=r.dataPtr,o=r.bpp,R=r.numSurfaces,p=0,E=0,m=0,P=0,n=0,i=0;2===o?(m=8,P=4):(m=4,P=4),E=m*P*o/8,a.mipmaps.length=r.numMipmaps*R;for(var V=0;V<r.numMipmaps;){var s=r.width>>V,u=r.height>>V;n=s/m,i=u/P,2>n&&(n=2),2>i&&(i=2),p=n*i*E;for(var d=0;R>d;d++){var T=new Uint8Array(e,t,p),_={data:T,width:s,height:u};a.mipmaps[d*r.numMipmaps+V]=_,t+=p}V++}return a};