THREE.OBJMTLLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(e,n,t,r,a){var s=this,o=new THREE.MTLLoader(e.substr(0,e.lastIndexOf("/")+1));o.crossOrigin=s.crossOrigin,o.load(n,function(n){var o=n;o.preload();var i=new THREE.XHRLoader(s.manager);i.setCrossOrigin(s.crossOrigin),i.load(e,function(e){var n=s.parse(e);n.traverse(function(e){if(e instanceof THREE.Mesh&&e.material.name){var n=o.create(e.material.name);n&&(e.material=n)}}),t(n)},r,a)},r,a)},parse:function(e,n){function t(e,n,t){return new THREE.Vector3(e,n,t)}function r(e,n){return new THREE.Vector2(e,n)}function a(e,n,t,r){return new THREE.Face3(e,n,t,r)}function s(e,n){v.length>0&&(p.vertices=v,p.mergeVertices(),p.computeFaceNormals(),p.computeBoundingSphere(),E.add(f),p=new THREE.Geometry,f=new THREE.Mesh(p,u)),void 0!==e&&(f.name=e),void 0!==n&&(u=new THREE.MeshLambertMaterial,u.name=n,f.material=u)}function o(e,n,t,r){p.faces.push(void 0===r?a(parseInt(e)-(l+1),parseInt(n)-(l+1),parseInt(t)-(l+1)):a(parseInt(e)-(l+1),parseInt(n)-(l+1),parseInt(t)-(l+1),[T[parseInt(r[0])-1].clone(),T[parseInt(r[1])-1].clone(),T[parseInt(r[2])-1].clone()]))}function i(e,n,t){p.faceVertexUvs[0].push([m[parseInt(e)-1].clone(),m[parseInt(n)-1].clone(),m[parseInt(t)-1].clone()])}function d(e,n,t){void 0===e[3]?(o(e[0],e[1],e[2],t),void 0!==n&&n.length>0&&i(n[0],n[1],n[2])):(void 0!==t&&t.length>0?(o(e[0],e[1],e[3],[t[0],t[1],t[3]]),o(e[1],e[2],e[3],[t[1],t[2],t[3]])):(o(e[0],e[1],e[3]),o(e[1],e[2],e[3])),void 0!==n&&n.length>0&&(i(n[0],n[1],n[3]),i(n[1],n[2],n[3])))}for(var l=0,c=new THREE.Group,E=c,p=new THREE.Geometry,u=new THREE.MeshLambertMaterial,f=new THREE.Mesh(p,u),v=[],T=[],m=[],g=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,h=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,H=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,R=/f( +\d+)( +\d+)( +\d+)( +\d+)?/,L=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))?/,M=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))?/,w=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))?/,I=e.split("\n"),O=0;O<I.length;O++){var F=I[O];F=F.trim();var b;if(0!==F.length&&"#"!==F.charAt(0))if(null!==(b=g.exec(F)))v.push(t(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])));else if(null!==(b=h.exec(F)))T.push(t(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])));else if(null!==(b=H.exec(F)))m.push(r(parseFloat(b[1]),parseFloat(b[2])));else if(null!==(b=R.exec(F)))d([b[1],b[2],b[3],b[4]]);else if(null!==(b=L.exec(F)))d([b[2],b[5],b[8],b[11]],[b[3],b[6],b[9],b[12]]);else if(null!==(b=M.exec(F)))d([b[2],b[6],b[10],b[14]],[b[3],b[7],b[11],b[15]],[b[4],b[8],b[12],b[16]]);else if(null!==(b=w.exec(F)))d([b[2],b[5],b[8],b[11]],[],[b[3],b[6],b[9],b[12]]);else if(/^o /.test(F))s(),l+=v.length,v=[],E=new THREE.Object3D,E.name=F.substring(2).trim(),c.add(E);else if(/^g /.test(F))s(F.substring(2).trim(),void 0);else if(/^usemtl /.test(F))s(void 0,F.substring(7).trim());else if(/^mtllib /.test(F)){if(n){var x=F.substring(7);x=x.trim(),n(x)}}else/^s /.test(F)||console.log("THREE.OBJMTLLoader: Unhandled line "+F)}return s(void 0,void 0),c}},THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);