THREE.DDSLoader=function(){this._parser=THREE.DDSLoader.parse},THREE.DDSLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype),THREE.DDSLoader.prototype.constructor=THREE.DDSLoader,THREE.DDSLoader.parse=function(r,a){function e(r){return r.charCodeAt(0)+(r.charCodeAt(1)<<8)+(r.charCodeAt(2)<<16)+(r.charCodeAt(3)<<24)}function t(r){return String.fromCharCode(255&r,r>>8&255,r>>16&255,r>>24&255)}function o(r,a,e,t){for(var o=e*t*4,n=new Uint8Array(r,a,o),i=new Uint8Array(o),m=0,p=0,h=0;t>h;h++)for(var d=0;e>d;d++){var u=n[p];p++;var E=n[p];p++;var s=n[p];p++;var D=n[p];p++,i[m]=s,m++,i[m]=E,m++,i[m]=u,m++,i[m]=D,m++}return i}var n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},i=542327876,m=131072,p=512,h=4,d=e("DXT1"),u=e("DXT3"),E=e("DXT5"),s=31,D=0,c=1,T=2,f=3,C=4,R=7,v=20,H=21,S=22,A=23,w=24,L=25,_=26,l=28,g=new Int32Array(r,0,s);if(g[D]!==i)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;if(!g[v]&h)return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;var b,y=g[H],x=!1;switch(y){case d:b=8,n.format=THREE.RGB_S3TC_DXT1_Format;break;case u:b=16,n.format=THREE.RGBA_S3TC_DXT3_Format;break;case E:b=16,n.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==g[S]&&16711680&g[A]&&65280&g[w]&&255&g[L]&&4278190080&g[_]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",t(y)),n;x=!0,b=64,n.format=THREE.RGBAFormat}n.mipmapCount=1,g[T]&m&&a!==!1&&(n.mipmapCount=Math.max(1,g[R])),n.isCubemap=g[l]&p?!0:!1,n.width=g[C],n.height=g[f];for(var F=g[c]+4,X=n.width,M=n.height,U=n.isCubemap?6:1,B=0;U>B;B++){for(var G=0;G<n.mipmapCount;G++){if(x)var k=o(r,F,X,M),I=k.length;else var I=Math.max(4,X)/4*Math.max(4,M)/4*b,k=new Uint8Array(r,F,I);var j={data:k,width:X,height:M};n.mipmaps.push(j),F+=I,X=Math.max(.5*X,1),M=Math.max(.5*M,1)}X=n.width,M=n.height}return n};