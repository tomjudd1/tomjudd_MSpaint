describe("SoundJS",function(){beforeEach(function(){jasmine.DEFAULT_TIMEOUT_INTERVAL=2e3,this.mp3File="audio/Thunder1.mp3",this.oggFile="audio/Thunder1.ogg",this.sound=createjs.Sound}),afterEach(function(){this.sound.removeAllSounds(),this.sound.removeAllEventListeners("fileload")}),it("should play mp3s",function(e){var t=this;this.sound.registerSound(this.mp3File,"thunder"),this.sound.on("fileload",function(o){expect(o.src).toBe(t.mp3File);var i=createjs.Sound.play("thunder");expect(i.playState).toBe("playSucceeded"),e()})}),it("should play oggs",function(e){var t=this;this.sound.registerSound(this.oggFile,"thunder"),this.sound.on("fileload",function(o){expect(o.src).toBe(t.oggFile);var i=createjs.Sound.play("thunder");expect(i.playState).toBe("playSucceeded"),e()})}),it("removeSound() should work",function(e){this.sound.registerSound(this.mp3File,"thunder"),this.sound.on("fileload",function(){createjs.Sound.removeSound("thunder");var t=createjs.Sound.play("thunder");expect(t.playState).toBe("playFailed"),e()})}),it("removeAllSounds() should work",function(e){this.sound.registerSound(this.mp3File,"thunder"),this.sound.on("fileload",function(){createjs.Sound.removeAllSounds();var t=createjs.Sound.play("thunder");expect(t.playState).toBe("playFailed"),e()})}),describe("Capabilities",function(){beforeEach(function(){this.capabilities=this.sound.getCapabilities(),this.availableCapabilities=["panning","volume","tracks","mp3","ogg","wav","mpeg","m4a","mp4","aiff","wma","mid"]}),it("getCapabilities() should contain the correct properties.",function(){var e=!0,t=this;this.availableCapabilities.forEach(function(o){o in t.capabilities||(e=!1)}),expect(e).toBe(!0)}),it("getCapability() should match getCapabilities().",function(){for(var e in this.capabilities)expect(this.capabilities[e]).toBe(this.sound.getCapability(e))})}),it("setMute() should work.",function(){this.sound.setMute(!0),expect(this.sound.getMute()).toBe(!0)}),it("setVolume() should work.",function(){this.sound.setVolume(.5),expect(this.sound.getVolume()).toBe(.5)}),it("initializeDefaultPlugins() should work",function(){expect(this.sound.initializeDefaultPlugins()).toBe(!0)}),it("isReady() should work",function(){expect(this.sound.isReady()).toBe(!0)}),it("loadComplete() should be true",function(e){this.sound.registerSound(this.mp3File,"thunder"),this.sound.on("fileload",function(){expect(createjs.Sound.loadComplete("thunder")).toBe(!0),createjs.Sound.removeAllSounds(),expect(createjs.Sound.loadComplete("thunder")).toBe(!1),e()})}),it("loadComplete() should be false",function(e){this.sound.registerSound(this.mp3File,"thunder"),this.sound.on("fileload",function(){createjs.Sound.removeAllSounds(),expect(createjs.Sound.loadComplete("thunder")).toBe(!1),e()})}),it("registerSounds() should work",function(e){var t=[{src:"Game-Shot.mp3",id:"shot"},{src:"Game-Spawn.mp3",id:"spawn"},{src:"Humm.mp3",id:"humm"}];createjs.Sound.registerSounds(t,"audio/");var o=0;this.sound.on("fileload",function(){if(++o==t.length){for(var i=0;i<t.length;i++){var n=createjs.Sound.play(t[i].id);expect(n.playState).toBe("playSucceeded")}e()}})}),it("defaultInterruptBehavior should be INTERRUPT_NONE",function(){expect(this.sound.defaultInterruptBehavior).toBe(this.sound.INTERRUPT_NONE)}),it("EXTENSION_MAP should contain mp4",function(){expect(this.sound.EXTENSION_MAP.m4a).toBe("mp4")}),it("Default constants should be be correct",function(){var e={INTERRUPT_ANY:"any",INTERRUPT_EARLY:"early",INTERRUPT_LATE:"late",INTERRUPT_NONE:"none",PLAY_FAILED:"playFailed",PLAY_FINISHED:"playFinished",PLAY_INITED:"playInited",PLAY_INTERRUPTED:"playInterrupted",PLAY_SUCCEEDED:"playSucceeded"};for(var t in e)expect(this.sound[t]).toBe(e[t])}),it("Default SUPPORTED_EXTENSIONS should match defaults",function(){for(var e=0,t=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],o=0;o<this.sound.SUPPORTED_EXTENSIONS.length;o++)t.indexOf(this.sound.SUPPORTED_EXTENSIONS[o])>-1&&e++;expect(e).toBe(t.length)}),it("stop() should stop all playing sounds.",function(e){var t=[{src:"Game-Shot.mp3",id:"shot"},{src:"Game-Spawn.mp3",id:"spawn"},{src:"Humm.mp3",id:"humm"}];createjs.Sound.registerSounds(t,"audio/");var o,i=0;this.sound.on("fileload",function(){if(++i==t.length){var n=[];for(o=0;o<t.length;o++){var s=createjs.Sound.play(t[o].id);n.push(s)}for(createjs.Sound.stop(),o=0;o<n.length;o++)expect(n[o].playState).toBe("playFinished");e()}})})});